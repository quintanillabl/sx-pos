<div layout >
  <md-card  flex>
    <ng-container *ngIf="tps$ | async; let tps">
      <md-card-title >
        <span layout >
          <span flex="40">TPS: {{tps.documento}} ({{tps.fecha | date: 'dd/MM/yyyy'}})</span>
          <span flex="20">SOL: {{tps.solicitudDeTraslado.documento}} {{tps.solicitudDeTraslado.sucursalSolicita.nombre}}</span>
          <span flex></span>
        </span>
      </md-card-title>
      <md-card-subtitle>
        <div layout >
          <span flex="40">{{tps.comentario}}</span>
          <span *ngIf="tps.fechaInventario" class="tc-pink-500" >
            INVENTARIADO: {{tps.fechaInventario | date:'dd/MM/yyyy HH:mm'}}
          </span>
          <span flex="20" class="push-right"> Clasificaci√≥n vale: {{tps.clasificacionVale}}</span>
          <span flex></span>
          <span>Usuario: {{tps.createUser}}</span>
        </div>
      </md-card-subtitle>

      <md-divider></md-divider>
        <td-data-table
          [data]="tps.partidas"
          [columns]="columns">
          <ng-template tdDataTableTemplate="solicitado" let-value="value" let-row="row">
            <span>{{value | number:'1.0-0'}}</span>
          </ng-template>
          <ng-template tdDataTableTemplate="recibido" let-value="value" let-row="row">
            <span>{{value | number:'1.0-0'}}</span>
          </ng-template>
        </td-data-table>
      <md-divider></md-divider>

      <ng-template tdLoading [tdLoadingUntil]="!procesando" tdLoadingStrategy="overlay" tdLoadingType="linear">
        <md-card-actions>
          <a md-button [routerLink]="['/traslados/salidas']" ><md-icon>keyboard_backspace</md-icon> Regresar </a>
          <button md-icon-button (click)="print(tps)" mdTooltip="Imprimir documento">
            <md-icon>print</md-icon>
          </button>

          <button md-button (click)="registrarSalida(tps)" color="accent">
               Dar salida <md-icon>flight_takeoff</md-icon>
            </button>
        </md-card-actions>
      </ng-template>

    </ng-container>
  </md-card>
</div>

